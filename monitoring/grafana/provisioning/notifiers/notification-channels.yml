apiVersion: 1

notifiers:
  # Slack Integration for Critical Alerts
  - name: gamifyx-critical-slack
    type: slack
    uid: gamifyx-critical-slack
    org_id: 1
    is_default: false
    send_reminder: true
    disable_resolve_message: false
    frequency: "10m"
    settings:
      url: "${SLACK_WEBHOOK_URL}"
      channel: "#gamifyx-critical"
      username: "GamifyX Alert Bot"
      title: "üö® GamifyX Critical Alert"
      text: |
        **Alert:** {{ range .Alerts }}{{ .Annotations.summary }}{{ end }}
        **Description:** {{ range .Alerts }}{{ .Annotations.description }}{{ end }}
        **Severity:** {{ .CommonLabels.severity }}
        **Service:** {{ .CommonLabels.service }}
        **Dashboard:** {{ range .Alerts }}{{ .Annotations.dashboard_url }}{{ end }}
        **Action Required:** {{ range .Alerts }}{{ .Annotations.action }}{{ end }}
      iconEmoji: ":rotating_light:"
      color: "#ff0080"

  # Slack Integration for Warning Alerts
  - name: gamifyx-warning-slack
    type: slack
    uid: gamifyx-warning-slack
    org_id: 1
    is_default: false
    send_reminder: true
    disable_resolve_message: false
    frequency: "30m"
    settings:
      url: "${SLACK_WEBHOOK_URL}"
      channel: "#gamifyx-warnings"
      username: "GamifyX Alert Bot"
      title: "‚ö†Ô∏è GamifyX Warning Alert"
      text: |
        **Alert:** {{ range .Alerts }}{{ .Annotations.summary }}{{ end }}
        **Description:** {{ range .Alerts }}{{ .Annotations.description }}{{ end }}
        **Severity:** {{ .CommonLabels.severity }}
        **Service:** {{ .CommonLabels.service }}
        **Dashboard:** {{ range .Alerts }}{{ .Annotations.dashboard_url }}{{ end }}
      iconEmoji: ":warning:"
      color: "#ffaa00"

  # Email Integration for Teacher Alerts
  - name: gamifyx-teacher-email
    type: email
    uid: gamifyx-teacher-email
    org_id: 1
    is_default: false
    send_reminder: true
    disable_resolve_message: false
    frequency: "15m"
    settings:
      addresses: "${TEACHER_EMAIL_LIST}"
      subject: "GamifyX Teacher Alert: {{ range .Alerts }}{{ .Annotations.summary }}{{ end }}"
      body: |
        <h2>üéì GamifyX Teacher Alert</h2>
        <p><strong>Alert:</strong> {{ range .Alerts }}{{ .Annotations.summary }}{{ end }}</p>
        <p><strong>Description:</strong> {{ range .Alerts }}{{ .Annotations.description }}{{ end }}</p>
        <p><strong>Category:</strong> {{ .CommonLabels.category }}</p>
        <p><strong>Action Required:</strong> {{ range .Alerts }}{{ .Annotations.action }}{{ end }}</p>
        <p><strong>Dashboard Link:</strong> <a href="{{ range .Alerts }}{{ .Annotations.dashboard_url }}{{ end }}">View Dashboard</a></p>
        <p><em>This alert was generated by the GamifyX monitoring system.</em></p>

  # Discord Integration for Student Engagement
  - name: gamifyx-engagement-discord
    type: discord
    uid: gamifyx-engagement-discord
    org_id: 1
    is_default: false
    send_reminder: true
    disable_resolve_message: false
    frequency: "20m"
    settings:
      url: "${DISCORD_WEBHOOK_URL}"
      username: "GamifyX Bot"
      avatar_url: "https://example.com/gamifyx-avatar.png"
      title: "üî• Student Engagement Alert"
      message: |
        **{{ range .Alerts }}{{ .Annotations.summary }}{{ end }}**
        
        {{ range .Alerts }}{{ .Annotations.description }}{{ end }}
        
        **Category:** {{ .CommonLabels.category }}
        **Action:** {{ range .Alerts }}{{ .Annotations.action }}{{ end }}
        
        [View Dashboard]({{ range .Alerts }}{{ .Annotations.dashboard_url }}{{ end }})

  # PagerDuty Integration for Critical System Issues
  - name: gamifyx-pagerduty
    type: pagerduty
    uid: gamifyx-pagerduty
    org_id: 1
    is_default: false
    send_reminder: false
    disable_resolve_message: false
    settings:
      integrationKey: "${PAGERDUTY_INTEGRATION_KEY}"
      severity: "critical"
      component: "GamifyX Platform"
      group: "Platform Engineering"
      summary: "{{ range .Alerts }}{{ .Annotations.summary }}{{ end }}"
      description: |
        Alert: {{ range .Alerts }}{{ .Annotations.summary }}{{ end }}
        Description: {{ range .Alerts }}{{ .Annotations.description }}{{ end }}
        Service: {{ .CommonLabels.service }}
        Severity: {{ .CommonLabels.severity }}
        Dashboard: {{ range .Alerts }}{{ .Annotations.dashboard_url }}{{ end }}

  # Microsoft Teams Integration
  - name: gamifyx-teams
    type: teams
    uid: gamifyx-teams
    org_id: 1
    is_default: false
    send_reminder: true
    disable_resolve_message: false
    frequency: "25m"
    settings:
      url: "${TEAMS_WEBHOOK_URL}"
      title: "GamifyX Platform Alert"
      message: |
        **Alert:** {{ range .Alerts }}{{ .Annotations.summary }}{{ end }}
        
        **Description:** {{ range .Alerts }}{{ .Annotations.description }}{{ end }}
        
        **Severity:** {{ .CommonLabels.severity }}
        **Service:** {{ .CommonLabels.service }}
        **Category:** {{ .CommonLabels.category }}
        
        **Action Required:** {{ range .Alerts }}{{ .Annotations.action }}{{ end }}
        
        [View Dashboard]({{ range .Alerts }}{{ .Annotations.dashboard_url }}{{ end }})

  # Webhook Integration for Custom Integrations
  - name: gamifyx-webhook
    type: webhook
    uid: gamifyx-webhook
    org_id: 1
    is_default: false
    send_reminder: false
    disable_resolve_message: false
    settings:
      url: "${CUSTOM_WEBHOOK_URL}"
      httpMethod: "POST"
      username: "${WEBHOOK_USERNAME}"
      password: "${WEBHOOK_PASSWORD}"
      title: "GamifyX Alert"
      body: |
        {
          "alert": "{{ range .Alerts }}{{ .Annotations.summary }}{{ end }}",
          "description": "{{ range .Alerts }}{{ .Annotations.description }}{{ end }}",
          "severity": "{{ .CommonLabels.severity }}",
          "service": "{{ .CommonLabels.service }}",
          "category": "{{ .CommonLabels.category }}",
          "platform": "{{ .CommonLabels.platform }}",
          "dashboard_url": "{{ range .Alerts }}{{ .Annotations.dashboard_url }}{{ end }}",
          "action": "{{ range .Alerts }}{{ .Annotations.action }}{{ end }}",
          "timestamp": "{{ .Alerts.Firing | len }}",
          "status": "{{ .Status }}"
        }